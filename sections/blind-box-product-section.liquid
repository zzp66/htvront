{%- style -%}
.blind-box {
  padding: 80px 160px 112px;
  background-image:url('{{section.settings.backgroundImg | img_url: '1920x'}}');
  background-repeat: no-repeat;
  background-color: {{section.settings.productItemColor}};
}
.blind-box .blind-box-introduction {
  font-size:18px;
  margin-top: 8px;
  color:{{ section.settings.introductionColor }};
  text-align: center;
  width:65%;
}
.blind-box .blind-box-products-list {
  padding-top:40px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}
.active {
  display:none !important;
}
.blind-box .blind-box-products-list .blind-box-products {
  border-radius:10px;
  display: flex;
  flex-direction: column;
  margin-bottom: 20px;
  width: calc(25% - 20px);
    &:last-child:nth-child(4n - 1) {
      margin-right: calc(25% + 3px);
    }
    &:last-child:nth-child(4n - 2) {
      margin-right: calc(50% + 5px);
    }
  max-height:425px;
  box-shadow: 0px 4px 14px 0px rgba(0,0,0,0.04);
  background: {{ section.settings.productBagColor }};
  border-radius: 16px;
}
.blind-box .blind-box-products-list .blind-box-products .blind-box-products-img {
  padding:20px
}
.blind-box .blind-box-products-list .blind-box-products .blind-box-products-text {
  text-align: center;
  font-weight: bold;
  color:{{ section.settings.productTextColor }};
  font-size: 16px;
  margin-bottom: 28px;
}
.blind-box .see-more {
  display:flex;    
  align-items: center;
  margin-top: 55px;
  flex-direction: column;
  cursor: pointer;
}
.blind-box .see-more .see-more-icon {
  display: inline-block;
  transform: rotate(270deg);
  width: 10px;
}
.blind-box .blind-box-products-header {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.blind-box-smallImg {
  display:none;
}
{%- endstyle -%}

{%- style -%}
@media screen and (max-width: 1660px) {
  .blind-box {
    padding: 80px 120px 112px;
  }
}
@media screen and (max-width: 1440px) {
  .blind-box {
    padding: 80px 100px 80px;
  }
  .blind-box .blind-box-introduction {
    font-size:16px;
  }
}
@media screen and (max-width: 1200px) {
  .blind-box {
    padding: 80px 60px 60px;
  }
  .blind-box .blind-box-products-header {
    margin: 0 auto;
  }
  .blind-box .blind-box-products-list {
    padding-top:25px;
  }
  .blind-box .blind-box-products-list .blind-box-products .blind-box-products-text {
    font-size: 14px;
  }
}
@media screen and (max-width: 990px) {
  .blind-box {
    padding: 60px 30px 60px;
  }
  .blind-box .blind-box-products-list {
    padding-top:25px;
  }
  .blind-box .blind-box-introduction {
    font-size:14px;
  }
  .blind-box .see-more {
    margin-top: 35px;
  }
  .blind-box .blind-box-products-list .blind-box-products {
    width: calc(25% - 10px);
  }
  .blind-box .blind-box-products-list .blind-box-products .blind-box-products-img {
    padding:15px;
  }
  .blind-box .blind-box-products-list .blind-box-products .blind-box-products-text {
    margin-bottom: 15px;
  }
}
@media screen and (max-width: 820px) {
  .blind-box {
    padding: 40px 10px 40px;
  }
  .blind-box .see-more {
    margin-top: 25px;
  }
}
@media screen and (max-width: 768px) {
  .blind-box {
    background-image:url('{{section.settings.cellphoneBackgroundImg | img_url: '768x'}}');
    background-repeat: no-repeat;
    background-size: cover;
    padding: 20px 12px 50px;
  }
  .blind-box .blind-box-products-list .blind-box-products {
    width: calc(50% - 10px);
  }
  .blind-box .see-more {
    margin-top: 30px;
  }
  .blind-box .blind-box-products-header {
    width: 100%;
  }
  .blind-box .blind-box-products-header .blind-box-products-header img{
    width: 80%;
    margin: 0 auto;
  }
  .blind-box .blind-box-products-header .blind-box-introduction{
    width: 70%;
  }
  .blind-box-smallImg {
    display:block;
  }
  .blind-box-img {
    display:none;
  }
}
@media screen and (max-width: 480px) {
  .blind-box .blind-box-products-header .blind-box-products-header img{
    width: 90%;
  }
  .blind-box .blind-box-products-header .blind-box-introduction{
    width: 86%;
    font-size: 13px;
  }
  .blind-box .blind-box-products-list .blind-box-products .blind-box-products-text {
    line-height: 18px;
    margin-bottom: 6px;
  }
  .blind-box .blind-box-products-list .blind-box-products .blind-box-products-img {
    padding: 6px 6px 3px;
  }
  .blind-box .blind-box-products-list .blind-box-products {
    &:last-child:nth-child(4n - 2) {
      margin-right: 0;
    }
  }
}
{%- endstyle -%}
<div class="blind-box">
  <div class="blind-box-products-header">
    <div class="blind-box-img"><img src="{{ section.settings.image | img_url: '1920x' }}" alt="" loading="lazy"></div>
    <div class="blind-box-smallImg"><img src="{{ section.settings.cellphoneTitleImage | img_url: '768x' }}" alt="" loading="lazy"></div>
    <div class="blind-box-introduction">{{ section.settings.introduction }}</div>
  </div>
      <div class="blind-box-products-list">
  {%- for block in section.blocks -%}
   {% assign index = forloop.index0 %}
        <div class="blind-box-products {%- if index > 11 %} active {% endif %}">
          <img class="blind-box-products-img" src="{{ block.settings.img | img_url: '1920x' }}" alt="" loading="lazy">
          <span class="blind-box-products-text">{{ block.settings.text }}</span>
        </div>
  {%- endfor -%}
      </div>
   {% assign blindBoxLength = section.blocks | size %}
  {%- if blindBoxLength > 12 -%}
    <div class="see-more"><img class="blind-box-products-img" src="https://cdn.shopifycdn.net/s/files/1/0356/5997/2741/files/img_v2_0cfe8bef-34f6-4b99-a728-491d84edc5ag.png?v=1683706362" alt="" loading="lazy"></div>
  {%- endif -%}
</div>
<script>
    $(function (){
      $(".see-more").click(function (){
          $('.blind-box .blind-box-products-list .blind-box-products').removeClass('active')
          $('.blind-box .see-more').addClass('active')
      });
    });
</script>   
{% schema %}
  {
    "name": "Blind Box Product",
    "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "titleImage"
    },
    {
      "type": "image_picker",
      "id": "cellphoneTitleImage",
      "label": "cellphoneTitleImage"
    },
    {
      "type": "text",
      "id": "introduction",
      "label": "introduction"
    },
    {
      "type": "color",
      "id": "introductionColor",
      "label": "introductionColor"
    },
    {
      "type": "image_picker",
      "id": "backgroundImg",
      "label": "backgroundImg"
    },
    {
      "type": "image_picker",
      "id": "cellphoneBackgroundImg",
      "label": "cellphoneBackgroundImg"
    },
    {
      "type": "color",
      "id": "productTextColor",
      "label": "productTextColor"
    },
    {
      "type": "color",
      "id": "productBagColor",
      "label": "productBagColor"
    },
    {
      "type": "color",
      "id": "productItemColor",
      "label": "productItemColor(背景图片最下方颜色)"
    }
    ],
    "blocks": [
    {
      "type": "blindBox",
      "name": "blindBox",
      "settings": [
        {
          "type": "image_picker",
          "id": "img",
          "label": "img"
        },
        {
          "type": "text",
          "id": "text",
          "label": "text"
        }
      ]
    }
    ],
  "presets": [
    {
      "name": "Blind Box Product"
    }
  ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}