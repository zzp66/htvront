<style>
  .Super-caption{
    letter-spacing: 0;
    position: relative;
    /* top: 84%; */
    left: 50%;
    transform: translateX(-50%);
    width:100%;
  }
  .cup-presell-time{
     background-position: center;
  }
  .cup-presell-time .countdown {
    position: relative;
  }
  .cup-presell-time .cup-presell-time-content{
    position: absolute;
    display: flex;
    left: 50%;
    top: 8%;
    transform: translateX(-50%);
    align-items: center;
    width: max-content;
    flex-direction: column;
  }
  .cup-presell-time .cup-presell-time-desc{
    font-weight: bold;
    font-size:26px;
    color: #FFF6E7;
    line-height: 36px;
    margin-bottom:32px;
  }
  .cup-presell-time .timer-count {
    display: flex;
    align-items: center
  }
  .cup-presell-time .format_span_time {
    overflow: hidden;
    font-size: 45px;
    color: #D93A2D;
    line-height: 52px;
    position: absolute;
    top: 6%;
    left: 50%;
    transform: translateX(-50%);
  }
  .cup-presell-time .format_span_time .t{
    font-weight:600;
  }
  .cup-presell-time .timer-count > div {
    position: relative;   
  }
  .cup-presell-time .timer-text {
    font-size: 22px;
    color: #C15D00;
    line-height: 29px;
    position: absolute;
    bottom: 7%;
    left: 50%;
    transform: translateX(-50%);
  }
  .time-box{
    width: 100px;
    height: 100px;
    background: linear-gradient(180deg, #FFF9E2 0%, #FFF0C1 100%);
    box-shadow: inset 0px 4px 7px 0px rgba(92,59,0,0.5);
    border-radius: 4px;
    border: 3px solid;
    border-image: linear-gradient(180deg, rgba(220, 110, 35, 1), rgba(255, 198, 94, 1)) 3 3;
    text-align: center;
    clip-path:inset(0 round 4px);
    margin-right:40px;
  }
  .time-box:nth-last-of-type(1){
    margin-right:0;
  }
 .cup-presell-time .dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: #914408;
  }
  .cup-presell-time .timer-count p {
    margin-left: 14px;
    margin-right: 14px;
  }
  .cup-presell-time .timer-count p + p {
    margin-top: 10px;
  }
  .cup-presell-time .deal-timer-desc {
    font-size: 16px;
    color: #ff4042;
    line-height: 22px;
    text-align: center;
  }
  .cup-presell-time .countdown img {
    margin: 0 auto;
  }
  #countdown_time{
    display:none
  }
   /* @media screen and (max-width: 1720px){
      .Super-caption{
        top: 94%;
      }
   } */
  @media screen and (max-width: 1440px){
    .cup-presell-time .countdown{
      width:65%;
      margin:0 auto
    }
  }
  @media screen and (max-width: 1330px){
    .cup-presell-time .format_span_time{
      font-size:30px
    }
    .cup-presell-time .timer-text{
      font-size:16px
    }
    .cup-presell-time .cup-presell-time-desc{
      font-size:26px
    }
  }
  @media screen and (max-width: 1024px){
    .cup-presell-time .countdown{
      width:80%
    }
    .cup-presell-time .format_span_time{
      font-size:26px
    }
    .cup-presell-time .timer-text{
      font-size:14px
    }
    .cup-presell-time .cup-presell-time-desc{
      font-size:24px;
      margin-bottom:15px;
    }
    .cup-presell-time .timer-count p{
      margin-left: 12px;
      margin-right: 12px;
    }
  }
  @media screen and (max-width: 820px){
    .cup-presell-time .format_span_time{
      font-size:22px;
      padding-top: 3px;
      line-height: 26px;
    }
    .cup-presell-time .cup-presell-time-desc{
      font-size: 16px;
      margin-right: 0;
      line-height: 32px;
    }
    .cup-presell-time .cup-presell-time-content{
      top: 0
    }
    .cup-presell-time .countdown{
      width:96%
    }
    .time-box {
      width: 68px;
      height: 55px;
      background: linear-gradient(180deg, #FFF9E2 0%, #FFF0C1 100%);
      box-shadow: inset 0px 2px 5px 0px rgba(92,59,0,0.35);
      border-radius: 2px;
      border: 1px solid;
      border-image: linear-gradient(180deg, rgba(220, 112, 36, 1), rgba(254, 196, 93, 1)) 1 1;
      margin-right:5px;
      clip-path: inset(0 round 2px);
    }
    .cup-presell-time .timer-text{
      bottom:0;
    }
  }
</style>
<div class="cup-presell-time" id="{{ section.settings.id }}">
        <div class="deal-timer-countdown">
        <div class="countdown">
          <picture>
            <source media="(max-width: 820px)" srcset="{{ section.settings.image_mobile | img_url:'339x' }}" />
            <source media="(min-width: 821px)" srcset="{{ section.settings.image | img_url:'932x' }}">
            <img src="{{ section.settings.image | img_url:'932x' }}"/>
          </picture>
          <div class="cup-presell-time-content">
            <div class="cup-presell-time-desc">{{ section.settings.desc_text }}</div>
            <div class="timer-count">
            <div class="time-box">
              <div class="format_span_time">
                <div>
                <span id="days" class="days format_span t">00</span>
                </div>
              </div>
              <span class="timer-text">DAYS</span>
            </div>
            <div class="time-box">
              <div class="format_span_time">
                <div>
                  <span id='hour' class="hour format_span t">00</span>
                </div>       
              </div>
              <span class="timer-text">HOURS</span>
            </div>
            <div class="time-box">
              <div class="format_span_time">
                <div>
                <span id='minute' class="minute format_span t">00</span>
                </div>
              </div>
              <span class="timer-text">MINS</span>
            </div>
            <div class="time-box">
              <div class="format_span_time">
                <div>
                <span id='second' class="second format_span t">00</span>
                </div>
               </div>
              <span class="timer-text">SECS</span>
            </div>
          </div>
          </div>
        </div>
        <div id="countdown_time">{{ section.settings.countdown_time }}</div>
      </div>
</div>
<script>
  // var p_times = '2023-3-10 14:35:00';
  var p_times = $('#countdown_time').text();
  //获取元素
  var days  = $("#days")[0];
  var hour = $("#hour")[0];
  var minute = $("#minute")[0];
  var second = $("#second")[0];
  //获取截止时间的时间戳（单位毫秒）
  var inputTime = new Date(""+ p_times.replace(/-/g, "/"));
  //我们先调用countDown函数，可以避免在打开界面后停一秒后才开始倒计时
  countDown();
  //定时器 每隔一秒变化一次
  var timer_s = setInterval(countDown, 1000);
  function countDown() {
      //获取当前时间的时间戳（单位毫秒）
      var nowTime = +new Date();
      //把剩余时间毫秒数转化为秒
      var times = (inputTime - nowTime) / 1000;
      if (times > 0) {
         var d = Math.floor(times /60 / 60 / 24 );
      //计算小时数 转化为整数
      //如果小时数小于 10，要变成 0 + 数字的形式 赋值给盒子
      days.innerHTML = d < 10 ? "0" + d : d;
      var h = Math.floor(times /60 / 60 % 24 );
      //计算小时数 转化为整数
      //如果小时数小于 10，要变成 0 + 数字的形式 赋值给盒子
      hour.innerHTML = h < 10 ? "0" + h : h;
      //计算分钟数 转化为整数
      var m = parseInt(times / 60 % 60);
      //如果分钟数小于 10，要变成 0 + 数字的形式 赋值给盒子
      minute.innerHTML = m < 10 ? "0" + m : m;
      //计算描述 转化为整数
      var s = parseInt(times % 60);
      // //如果秒钟数小于 10，要变成 0 + 数字的形式 赋值给盒子
      second.innerHTML = s < 10 ? "0" + s : s;
      } else {
        clearInterval(timer_s);
      }
  }
</script>
{% schema %}
  {
    "name": "Super-Shopping-Time",
    "settings": [
      {
        "type": "text",
        "id": "id",
        "label": "id(页面唯一性，全英文)"
      },
      {
        "type":"image_picker",
        "id":"image",
        "label":"image"
      },   {
        "type":"image_picker",
        "id":"image_mobile",
        "label":"image mobile"
      }, 
      {
        "type":"text",
        "id":"desc_text",
        "label":"desc"
      },{
        "type":"text",
        "id":"countdown_time",
        "label":"text"
      }],
     "presets": [
        {
          "name": "Super-Shopping-Time"
        }
      ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}