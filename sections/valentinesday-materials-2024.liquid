<style>
  .valentinesday-materials{
    background-image:url('{{ section.settings.background_image | img_url:'1920x' }}');
    background-repeat: no-repeat;
    background-size: 100% 100%;
    {% if section.settings.background_color != blank %}
      background:{{section.settings.background_color}};
    {% endif %}
    padding-top:25px;
  }

    .title-desc-style{
        text-align:center;
        margin-top: 10px;
        position: relative;
    }
    .title-desc-style>img{
        margin:0 auto;
    }
    .valentinesday-materials .product-box{
        width:1600px;
        margin:0 auto;
        background: #FBB7C2;
        border-radius: 10px;
        position: relative;
        overflow:hidden;
    }
    .valentinesday-materials .product-box>img{
        position:absolute;
        top:0;
    }
    .title-desc-style>div{
        display:inline-block;
        position: relative;
    }
    .title-desc-style .title{
        position: absolute;
        margin: 0;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 32px;
        font-weight: bold;
        color: #71132E;
        line-height: 42px;
    }
    .title-desc-style>p{
        font-size: 20px;
        font-weight: 400;
        color: #71132E;
        line-height: 28px;
        margin-top: -30px;
    }
    .position-box{
        position: relative;
    }
    .position-box .product-item{
        display:flex;
        padding:20px 15px;
    }
    .valentinesday-materials .position-box .product-model-items{
        flex:1;
        margin-right: 15px;
        background: #FFF4F4;
        padding: 16px 14px;
        border-radius: 6px;
    }
    .valentinesday-materials .position-box .product-model-items:nth-last-child(1){
        margin-right:0;
    }
    .valentinesday-materials .product-model-items .fn-product-price{
        width:28%;
    }
    .valentinesday-materials .product-model-items .fn-compareat_price{
        text-align:right;
    }
    .valentinesday-materials .fn-product-title{
        line-height: 22px;
    }
    .valentinesday-materials .product-model-items .fn-product-title .t{
        color: #71132E;
        font-size: 16px;
    }
    .valentinesday-materials .product-model-items .fn-product-price span{
        color: #FF708A;
        font-size: 22px;
    }
    .valentinesday-materials .product-model-items .fn-compareat_price .fn-compare-at_price{
        color: #71132E;
    }
    .valentinesday-materials .product-model-items .fn-color-attr{
        margin: 10px 0 12px 0;
    }
    .valentinesday-materials .product-model-items .button--full-width{
        border-radius: 4px;
        height: 46px;
        background: linear-gradient(270deg, #FF7D9A 0%, #FF8EA7 100%);
        --border-offset: none;
        --border-opacity: none;
        font-size: 18px;
    }
    .product-items-box {
        padding:13px 13px 18px;
        background: #FFF4F4;
        border-radius: 6px;
    }
    .product-items-box .button--full-width{
        padding:0;
        border-radius: 4px;
        height: 46px;
        background: linear-gradient(270deg, #FF7D9A 0%, #FF8EA7 100%);
        --border-offset: none;
        --border-opacity: none;
        font-size: 18px;
    }
    .presell-product-items .fn-color-attr{
        margin:15px 0;
    }
    .presell-product-items .fn-product-price span{
        color: #FF708A;
        font-size: 22px;
    }
    .presell-product-items .fn-product-price{
        width: 30%;
        text-align: right;
    }
    .presell-product-items .fn-compareat_price .fn-compare-at_price{
        color: #71132E;
        font-size: 18px;
        font-weight: 400;
    }
    .presell-product-items:nth-child(3n){
        margin-right:0;
    }
    .valentinesday-materials .position-box{
        padding: 0 45px 30px;
    }
    .deposit-module-coupon{
        margin-top:25px;
    }
    .coupons-item{
        position: relative;
        max-width:454px;
    }
    .coupons-item .item-module{
        position: absolute;
        display: flex;
        top: 0;
        color: #000;
        align-items: center;
        height:100%;
        width: 100%;
        left: 0;
        justify-content: space-between;
    }
    .coupons-money{
        width: 34.3%;
        text-align:center;
        color:#71132E;
    }
    .coupons-money>div {
        line-height: 36px;
    }
    .coupons-money>div>span:nth-child(1){
        font-size: 30px;
        font-weight: bold;
    }
    .coupons-money>div>span:nth-child(2){
        font-size: 48px;
        font-weight: bold;
    }
    .coupons-money>span{
        font-size: 24px;
        font-weight: bold;
        color: #670000;
        line-height: 28px;
        margin-top: 6px;
    }
    .coupons-rules>.rules-div>p{
        font-size: 14px;
        font-weight: 400;
        color: #71132E;
        line-height: 16px;
        padding-bottom: 12px;
        position:relative;
    }
    .coupons-rules>.rules-div>p:nth-last-child(1){
        padding-bottom:0;
    }
    .coupons-rules{
        width: calc(65.7% - 40px);
        word-wrap: break-word;
    }
    .coupon-code{
        position: relative;
        margin-bottom: 20px;
        color:#71132E;
    }
    .coupon-code:before{
        content:"";
        width: 6px;
        height: 6px;
        background: #691300;
        border-radius: 50%;
        position:absolute;
        left: -15px;
        top: 10px;
    }
    .coupons-rules>.rules-div>p:before{
        content:"";
        width: 6px;
        height: 6px;
        background: #691300;
        border-radius: 50%;
        position:absolute;
        left: -15px;
        top: 5px;
    }
    .coupon-code>img{
        display:inline-block;
        cursor: pointer;
        vertical-align: baseline;
    }
    .deposit-module-coupon .swiper-wrapper{
        justify-content: center;
    }
    .coupons-item:nth-last-child(1){
        margin-right:0 !important;
    }
    @media screen and (max-width: 1440px){
        .coupons-money>div>span:nth-child(1) {
            font-size: 24px;
        }
        .coupons-money>div>span:nth-child(2) {
            font-size: 40px;
        }
        .coupons-money>span {
            font-size: 22px;
        }
    }
    @media screen and (max-width: 1024px){
        .coupons-item .item-module{
            flex-direction: column;
          justify-content: normal;
        }
        .coupons-money{
            width:100%;
            padding: 30px 0;
        }
        .coupons-rules {
            padding: 0 20px 0 25px;
            width: calc(100% - 45px);
        }
        .coupon-code{
            margin-bottom:10px;
        }
        .product-items-box{
            padding:5px 5px 8px;
        }
        .product-items-box .button--full-width{
            height: 40px;
            font-size: 14px;
            min-height: 40px;
        }
        .presell-product-items .fn-product-price span{
            font-size: 16px;
        }
        .presell-product-items .fn-compareat_price .fn-compare-at_price{
            font-size: 14px;
        }
        .valentinesday-materials .position-box{
            padding:0 5px 12px;
        }
    }
    @media screen and (max-width: 820px){
        .valentinesday-materials{
            {% if section.settings.background_color_mobile != blank %}
                background:{{section.settings.background_color_mobile}}
            {% else %}
                background:none;
            {% endif %}
        }
      .coupons-money{
    padding: 20px 0 30px;
      }
    }
    @media screen and (max-width: 750px){
        .coupons-money>div>span:nth-child(2){
            line-height: 60px;
        }
  .coupons-money{
    padding: 0 0 30px;
  }
    }
    @media screen and (max-width: 480px){
        .valentinesday-product-swiper {
            margin-top: 10px;
        }
        .deposit-module-coupon .swiper-wrapper {
            justify-content: start;
        }
        .coupons-money>div>span:nth-child(2) {
            line-height: 32px;
            font-size: 28px;
        }
        .deposit-module-coupon{
            margin-top:10px;
        }
        .coupons-money>span {
            font-size: 18px;
        }
      .coupons-money{
        padding:10px 0 15px;
      }
    }

    @media screen and (max-width: 410px){
        .valentinesday-materials{
            padding-top:0;
        }
      .coupons-money>div {
    line-height: 25px;
}
    }
   @media screen and (max-width: 375px){
      .coupons-money{
            padding-bottom: 5px;
        }
   }
</style>
<div class="valentinesday-materials" id="{{ section.settings.id }}">
  <div class="product-box valentinesday-width">
    <img src="{{ section.settings.image | img_url:'1600x'}}">
    <div class="position-box">
      <div class="title-desc-style">
         <div>
          <img src="{{ section.settings.title_image | img_url:'767x' }}">
          <p class="title">{{ section.settings.title }}</p>
         </div>
         <p class="desc">{{ section.settings.desc }}</p>
      </div>
      <div class="swiper-container deposit-module-coupon">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            <div class="coupons-item swiper-slide">
               <picture>
                <source media="(max-width: 1024px)" srcset="{{ section.settings.coupons_image_mobile | img_url:'316x' }}">
                <source media="(min-width: 1025px)" srcset="{{ section.settings.coupon_image | img_url:'454x' }}">
                <img src="{{ section.settings.coupon_image | img_url:'454x' }}">
              </picture>
              <div class="item-module deposit-item">
                <div class="coupons-money">
                  <div>
                    <span>{{ block.settings.currency }}</span><span>{{ block.settings.money }}</span>
                  </div>
                  <span>{{ block.settings.coupon }}</span>
                </div>
                <div class="coupons-rules">
                  {% if block.settings.coupon_code != blank %}
                    <div class="coupon-code">
                        Code: {{ block.settings.coupon_code }} 
                        <img src="https://cdn.shopify.com/s/files/1/0356/5997/2741/files/Group_18_84f240dd-e13f-43a2-abf8-96a7f7c7f522.png?v=1705978648" onclick="copyticket('{{ block.settings.coupon_code }}')">
                    </div>
                  {% endif %}
                  <div class="rules-div">
                    {{ block.settings.coupons_rules }}
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      <div class="swiper-scrollbar" id="valentinesday-deposit-swiper-scrollbar"></div>
      <div class="swiper-container valentinesday-product-swiper">
        <div class="swiper-wrapper">
           {% for item in section.settings.product_collection.products %}
              {% if forloop.index <= section.settings.product_count %}
                <div class="presell-product-items swiper-slide">
                  <div class="product-items-box">
                      {% render 'product-Model-custom',
                        card_product: item,
                        progress: false,
                        show_secondary_image: section.settings.show_secondary_off,
                        colorSize: true,
                        buttonSeat: 'fileSteam',
                        buttonText: 'ADD TO CART',
                        title: 'flex',
                        pirce: 'intitle'
                      %}
                  </div>
                </div>
              {% endif %}
            {% endfor %}
        </div>
      </div>
      <div class="swiper-scrollbar" id="valentinesday-product-swiper-scrollbar"></div>
    </div>
  </div>
</div>
<script>
  var mySwiper_e = new Swiper('.valentinesday-product-swiper',{
    slidesPerView: 3, 
    spaceBetween:28,
    slidesPerColumn: 3,
    slidesPerColumnFill : 'row',
    scrollbar: {
      el: '#valentinesday-product-swiper-scrollbar',
    },
   breakpoints:{
      1440:{
         slidesPerView:3,
         spaceBetween:15,
      },
      480:{
         slidesPerView:2.2,
         spaceBetween:6,
      }
    }
  }); 
  var mySwiper_s = new Swiper('.deposit-module-coupon',{
    slidesPerView: 3, 
    spaceBetween:40,
    scrollbar: {
      el: '#valentinesday-deposit-swiper-scrollbar',
    },
   breakpoints:{
      1440:{
         slidesPerView:3,
         spaceBetween:15,
      },
      480:{
         slidesPerView:2.2,
         spaceBetween:6,
      }
    }
  });
  
  function copyticket(code){
    let url = code;
    let copyInput = document.createElement('input');
    	document.body.appendChild(copyInput);
    	copyInput.setAttribute('value', url);
    	copyInput.select();
    	document.execCommand("Copy");
    	copyInput.remove();
        alertMsg()
  }
   function alertMsg(){
      var alertFram = document.createElement("DIV");
      alertFram.id = "alertFram";
      alertFram.style.position = "fixed";
      alertFram.style.width = "100%";
      alertFram.style.textAlign = "center";
      alertFram.style.bottom = "40px";
      alertFram.style.zIndex = "10001";
      strHtml = " <span style=\"font-family: 微软雅黑;display:inline-block;background:#333;color:#fff;padding:0 20px;line-height:36px;border-radius:6px; \">Copied successfully</span>";
      alertFram.innerHTML = strHtml;
      document.body.appendChild(alertFram);
      setTimeout((function(){
        alertFram.style.display="none";
      }),2000);
    }
</script>
{% schema %}
  {
    "name": "Valentinesday-Materials",
    "settings": [
      {
        "type": "text",
        "id": "id",
        "label": "id(页面唯一性，全英文)"
      },{
        "type":"color",
        "id":"background_color",
        "label":"background color(PC)"
      },{
        "type":"color",
        "id":"background_color_mobile",
        "label":"background color(mobile)"
      },{
        "type":"image_picker",
        "id":"background_image",
        "label":"background image"
      },{
        "type":"image_picker",
        "id":"image",
        "label":"image"
      },{
        "type":"image_picker",
        "id":"title_image",
        "label":"title image"
      },{
        "type":"text",
        "id":"title",
        "label":"title"
      },{
        "type":"text",
        "id":"desc",
        "label":"desc"
      },{
        "type": "image_picker",
        "id": "coupon_image",
        "label": "coupon image"
      },{
        "type":"image_picker",
        "id":"coupons_image_mobile",
        "label":"coupons image mobile"
      },{
        "type": "collection",
        "id": "product_collection",
        "label": "product collection"
      },{
        "type": "checkbox",
        "id": "show_secondary_off",
        "default": false,
        "label": "show_secondary_off_iamge"
      },{
          "type":"range",
          "id":"product_count",
          "min":3,
          "max": 9,
          "step":3,
          "label":"product_count",
          "default": 9
      }
    ],
    "max_blocks":3,
    "blocks":[{
      "type":"coupon",
      "name": "coupon",
      "settings": [
      {
          "type": "text",
          "id": "currency",
          "label": "currency"
        },{
          "type": "text",
          "id": "money",
          "label": "money"
        },{
          "type": "text",
          "id": "coupon",
          "label": "coupon"
        },{
          "type":"text",
          "id":"coupon_code",
          "label":"coupon code"
        },{
          "type": "html",
          "id": "coupons_rules",
          "label": "coupons rules"
        }
      ]
    }],
    "presets":[
        {
          "name":"Valentinesday-Materials"
        }
    ]
  }
{% endschema %}