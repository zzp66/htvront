<style>
  .cap-press-banner{
        position: relative;
  }
  /* .cap-press-subscript{
    position: absolute;
    background: #ffffff;
    border-radius: 4px 4px 4px 4px;
    color:#682c00;
    padding:15px 26px;
    left: 3.8%;
    top: 60%;
    cursor: pointer;
    font-size: 20px;
    font-weight: 600;
  } */
  .cap-press-banner .cap-press-submit{
    position: absolute;
    left: 3.8%;
    top: 40%;
    cursor: pointer;
    font-size: 20px;
    font-weight: 600;
  }
  .cap-press-submit .newsletter-form__field-wrapper .field__input{
    width: 328px;
    height: 56px;
    border-radius: 6px;
    border: 1px solid #A45822;
    background: none;
    color: #802704;
  }
  .cap-press-submit .field__label{
    line-height: 2;
  }
  .cap-press-submit .field__input:focus~.field__label{
    line-height: 1.6;
  }
  .cap-press-submit .home-emailButton.t{
    background: #A45822;
    border-radius: 6px;
    border: none;
    outline: none;
    color: #fff;
    padding: 0;
    font-size: 18px;
    display: inline-block;
    width: 155px;
    height: 56px;
    margin-left: 12px;
  }
  .cap-press-submit .newsletter-form__field-wrapper{
    max-width: 100%;
    display: flex;
  }
   .cup-dialog{
      width: 900px;
      background-color:#FFFDEF;
      border-radius: 10px;
      transform: translate(-50%, -50%);
      top: 50%;
      left: 50%;
      position: absolute;
      z-index: 1000;
      display:none;
      padding: 56px 106px 27px;
    }
  .icon-cup-close{
    position: absolute;
    right: 17px;
    top: 9px;
    cursor: pointer;
  }
  .cup-dialog .title{
    font-size: 20px;
    font-weight: bold;
    color: #802704;
    line-height: 23px;
    margin:0;
    text-align: center;
  }
  .cup-dialog-img{
    position: absolute;
    bottom: 0;
    right: 38px;
  }
  .dialog-middle{
    text-align:center;
  }
  .dialog-middle>i{
    font-size: 24px;
    color: #333333;
    line-height: 33px;
    font-style: normal;
    padding-right: 15px;
    vertical-align: middle;
  }
  .dialog-middle>p{
    font-size: 18px;
    color: #333333;
    display: inline-block;
    margin: 10px 0 0 -195px;
  }
  .cup-dialog .newsletter-form{
    max-width: 820px;
    display: inline-block;
    text-align: left;
  }
  .cup-dialog .newsletter-form__field-wrapper{
    max-width: 820px;
  }
  .cup-dialog .newsletter-form__field-wrapper .field__input{
    width: calc(100% - 80px);
    height: 42px;
    line-height: 42px;
    border: 1px solid #802704;
    font-size: 18px;
    border-radius: 4px;
    padding: 5px 10px;
    margin-left: 10px;
    background:none;
  }
  .cup-dialog .field__label{
    display:none;
  }
  .cup-dialog .t{
    width: 190px;
    height: 60px;
    background: #884A16;
    border-radius: 4px;
    color: #fff;
    border: none;
    font-size: 18px;
    vertical-align: middle;
    cursor: pointer;
    margin:0 auto;
    display: block;
  }
  .cup-dialog .home-emailInput{
    margin:37px 0 10px 0
  }
  .cup-dialog .home-emailInput>span{
    font-size: 16px;
    font-weight: bold;
    color: #802704;
    line-height: 19px;
  }
  .cup-body-mask{
    position: fixed;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    left: 0;
    top: 0;
    z-index: 999;
    display: none;
  }
  .cup-banner-image{
    position: relative;
  }
  .cup-buttons{
    position: absolute;
    top: 354px;
    left: 132px;
  }
  .cup-buttons>a{
    cursor: pointer;
    display: inline-block;
    padding: 5px 26px 4px 26px;
    border: 2px solid #884A16;
    border-radius: 4px;
  }
  .cup-buttons .icon-dialog{
    padding:13px 34px;
    background: #884A16;
    border-radius: 29px;
    border: none;
    color: #fff;
    font-size: 24px;
    font-weight: bold;
    letter-spacing: 1px;
    cursor: pointer;
  }
  .cup-buttons .icon-style img{
    display:inline-block;
  }
  .cup-buttons .icon-style i{
    font-size: 18px;
    color: #884A16;
    font-style:normal;
    vertical-align: middle;
  }
  .cup-dialog .newsletter-form__message{
    display:none;
  }
  .cup-buttons>p{
    font-size: 18px;
    color: #884A16;
    line-height: 24px;
    padding: 18px 0 12px 0;
  }
  .icon-style:nth-of-type(1){
    margin-right:8px;
  }
  .learn-more{
    position: absolute;
    top: 43%;
    left: 32.5%;
    font-size: 30px;
    font-weight: bold;
    color: #884A16 !important;
  }
  .cap-press-subscript-tips{
    color: #802704;
    font-size: 14px;
    margin-bottom:10px
  }
  @media screen and (max-width: 1440px){
    .cap-press-subscript{
      padding:10px 15px;
    }
    .cap-press-banner .cap-press-submit{
      top:38%;
    }
  }
  @media screen and (max-width: 1200px){
    .cap-press-subscript{
      padding:7px 15px;
      line-height:22px
    }
    .cup-dialog{
      width:600px;
      padding: 56px 56px 27px;
    }
  }
  @media screen and (max-width: 1024px){
    .cap-press-submit .home-emailButton.t{
      height: 44px;
    }
    .cap-press-submit .field__label {
      line-height: 1.5;
    }
    .cap-press-submit .newsletter-form__field-wrapper .field__input{
      height:44px;
    }
    .cap-press-submit{
      top:38%;
    }
  }
  @media screen and (max-width: 820px){
    .cap-press-subscript{
      font-size: 14px;
    }
    .cap-deposit-add .button--full-width{
      font-size: 14px;
    }
  }
  @media screen and (max-width: 768px){
    .cap-press-subscript{
      padding:5px 15px;
      top:36%;
      line-height:16px
    }
    /* .cap-press-banner img{
      width:100%
    } */
    .cup-dialog{
      width:400px;
      padding: 36px 36px 27px;
    }
    .cup-dialog .title{
      font-size: 16px;
    }
    .cup-dialog .home-emailInput{
      margin:20px 0 10px 0
    }
    .cup-dialog .t{
      height:48px
    }
    .cup-dialog .home-emailInput>span{
      font-size:14px
    }
    .cap-press-submit .newsletter-form__field-wrapper{
      flex-direction: column;
    }
    .cap-press-submit .newsletter-form__field-wrapper .field__input{
      width: 166px;
      height: 44px;
    }
    .cap-press-submit .home-emailButton.t{
      width: 84px;
      height: 44px;
      margin-left: 0;
      margin-top: 7px;
      font-size: 14px;
    }
    .cap-press-submit .field__label{
      font-size:14px;
    }
    .cap-press-banner .cap-press-submit{
      top:20%;
    }
  }
  @media screen and (max-width: 480px){
    .cap-press-subscript{
      top:35%
    }
    .cup-dialog{
      width:93.6%;
      padding: 16px 11px 35px;
    }
    .cap-press-banner .cap-press-submit{
      top: 20%;
    }
  }
</style>
<div class="cap-press-banner">
    {%- if section.settings.link != blank -%}
    <a href="{{ section.settings.link }}">
  {%- endif -%}
  <picture>
    <source media="(max-width: 768px)" srcset="{{ section.settings.image_mobile | img_url:'768x' }}">
    <source media="(min-width: 769px)" srcset="{{ section.settings.image | img_url:'1920x' }}">
    <img src="{{ section.settings.image | img_url:'1920x' }}">
  </picture>
  {%- if section.settings.link != blank -%}
    </a>
  {%- endif -%}
  <div class="cap-press-submit">
    {% form 'customer', class: 'newsletter-form' %}
        <input type="hidden" name="contact[tags]" value="newsletter,Hat_consumer">
        <div class="newsletter-form__field-wrapper">
          <div class="home-emailInput">
            <input
              id="NewsletterForm--{{ section.id }}"
              type="email"
              name="contact[email]"
              class="field__input"
              value="{{ form.email }}"
              aria-required="true"
              autocorrect="off"
              autocapitalize="off"
              autocomplete="email"
              {% if form.errors %}
                autofocus
                aria-invalid="true"
                aria-describedby="Newsletter-error--{{ section.id }}"
              {% elsif form.posted_successfully? %}
                aria-describedby="Newsletter-success--{{ section.id }}"
              {% endif %}
              placeholder="Enter your email "
              required
            >
            <label class="field__label" for="NewsletterForm--{{ section.id }}">Enter your email </label>
          </div>
          <div>
            <button
              type="submit"
              class="home-emailButton t"
              name="commit"
              id="Subscribe"
              aria-label="{{ 'newsletter.button_label' | t }}"
            >
              <!-- {% render 'icon-arrow' %} -->
              {{ section.settings.sub-text }}
            </button>
          </div>
           
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
              {%- render 'icon-error' -%}
              {{- form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email -}}
            </small>
          {%- endif -%}
        </div>
        {%- if form.posted_successfully? -%}
          <h3
            class="newsletter-form__message newsletter-form__message--success form__message"
            id="Newsletter-success--{{ section.id }}"
            tabindex="-1"
            autofocus
          >
            {% render 'icon-success' -%}
            {{- 'newsletter.success' | t }}
          </h3>
        {%- endif -%}
      {% endform %}
  </div>
  <!-- <div class="cap-press-subscript">
    {{ section.settings.sub-text }} 
  </div>-->
   <div class="cup-dialog">
    <img
      class="icon-cup-close"
      src="https://cdn.shopify.com/s/files/1/0356/5997/2741/files/icon-cup-close.png?v=1688954093"
    >
    <div class="title">
      Subscribe Now
    </div>
    <div class="dialog-middle">
      
      {% form 'customer', class: 'newsletter-form' %}
        <input type="hidden" name="contact[tags]" value="newsletter,Hat_consumer">
        <div class="newsletter-form__field-wrapper">
          <div class="home-emailInput">
            <span>E-mail</span>
            <input
              id="NewsletterForm--{{ section.id }}"
              type="email"
              name="contact[email]"
              class="field__input"
              value="{{ form.email }}"
              aria-required="true"
              autocorrect="off"
              autocapitalize="off"
              autocomplete="email"
              {% if form.errors %}
                autofocus
                aria-invalid="true"
                aria-describedby="Newsletter-error--{{ section.id }}"
              {% elsif form.posted_successfully? %}
                aria-describedby="Newsletter-success--{{ section.id }}"
              {% endif %}
              placeholder="Enter your email "
              required
            >
            <label class="field__label" for="NewsletterForm--{{ section.id }}">Enter your email </label>
          </div>
          <div class="cap-press-subscript-tips">
            {{ section.settings.tips }}
          </div>
          <div>
            <button
              type="submit"
              class="home-emailButton t"
              name="commit"
              id="Subscribe"
              aria-label="{{ 'newsletter.button_label' | t }}"
            >
              <!-- {% render 'icon-arrow' %} -->
              Submit
            </button>
          </div>
           
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
              {%- render 'icon-error' -%}
              {{- form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email -}}
            </small>
          {%- endif -%}
        </div>
        {%- if form.posted_successfully? -%}
          <h3
            class="newsletter-form__message newsletter-form__message--success form__message"
            id="Newsletter-success--{{ section.id }}"
            tabindex="-1"
            autofocus
          >
            {% render 'icon-success' -%}
            {{- 'newsletter.success' | t }}
          </h3>
        {%- endif -%}
      {% endform %}
    </div>
  </div>
  <div class="cup-body-mask"></div>
</div>
<script>
  $(function(){
    $('.cap-press-banner .cap-press-subscript').on('click',function(){
       $('.dialog-middle .field__input').val('')
       $('.cup-dialog').css('display',"block")
       $('.cup-body-mask').css('display',"block")
       $('body').css('overflow',"hidden")
     })
    $('.cup-dialog .icon-cup-close').on('click',function(){
       $('.cup-dialog').css('display',"none")
       $('.cup-body-mask').css('display',"none")
      $('body').css('overflow',"auto")
     })
    window.onbeforeunload=function(){
      alert("===onbeforeunload===");
      if(event.clientX>document.body.clientWidth && event.clientY < 0 || event.altKey){
        alert("你关闭了浏览器");
      }else{
        alert("你正在刷新页面");
      }
    }
  })
    
</script>
{% schema %}
  {
    "name":"Cap Press Banner",
    "settings":[
        {
            "type":"image_picker",
            "id":"image",
            "label":{
                "en":"Image",
                "zh-CN":"图片"
            }
        },
      {
            "type":"image_picker",
            "id":"image_mobile",
            "label":{
                "en":"Image mobile",
                "zh-CN":"手机端图片"
            }
        },
        {
            "type":"url",
            "id":"link",
            "label":{
                "en":"Links",
                "zh-CN":"链接"
            }
        },{
           "type":"text",
            "id":"card_id",
            "label":"id"
        },{
           "type":"text",
            "id":"sub-text",
            "label":"sub-text"
        },{
           "type":"text",
            "id":"tips",
            "label":"tips"
        }
    ],
    "presets":[
        {
            "name":"Cap Press Banner"
        }
    ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}