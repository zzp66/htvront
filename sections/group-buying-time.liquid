<style>
  .group-buying-time{
     letter-spacing: 0;
     background-image:url('{{ section.settings.background_image | img_url:'1920x' }}');
     background-size: 100% 100%;
     background-position: center;
     text-align:center;
     padding:40px 0 20px 0;
  }
  .group-buying-time .title{
    font-weight: bold;
    color: #914408;
    font-size: 36px;
    margin: 0;
    padding-bottom: 10px;
  }
  .group-buying-time .countdown {
    position: relative;
  }
  .group-buying-time .group-buying-time-content{
    position: absolute;
    display: flex;
    left: 50%;
    top: 20px;
    transform: translateX(-50%);
    align-items: center;
    width: max-content;
    flex-direction: column;
  }
  .group-buying-time .group-buying-time-desc{
    font-weight: bold;
    color: #C87804;
    line-height: 41px;
    font-size:24px;
  }
  .group-buying-time-desc .line{
    width: 71px;
    height: 2px;
    background: #C87804;
    display:inline-block;
    vertical-align: middle;
  }
  .group-buying-time-desc .circle{
    width: 8px;
    height: 8px;
    background: #C87804;
    border-radius:50%;
    display:inline-block;
    vertical-align: middle;
  }
  .group-buying-time-desc .left{
    margin-right:10px;
  }
  .group-buying-time-desc .right{
    margin-left:10px;
  }
  .group-buying-time .timer-count {
    display: flex;
    align-items: center
  }
  .group-buying-time .format_span_time {
    overflow: hidden;
    font-size: 45px;
    color: #914408;
    line-height: 52px;
    padding-top: 7px;
  }
  .group-buying-time .format_span_time .t{
    font-weight:600;
  }
  .group-buying-time .timer-count > div {
    position: relative;   
  }
  .group-buying-time .timer-text {
    font-size: 18px;
    color: #914408;
  }
  .time-box{
    width: 100px;
    height: 100px;
    background: linear-gradient(180deg, #FFF9E2 0%, #FFF0C1 100%);
    box-shadow: inset 0px 4px 7px 0px rgba(92,59,0,0.5);
    border-radius: 4px;
    border: 3px solid;
    border-image:linear-gradient(180deg, rgba(214, 114, 46, 1), rgba(255, 177, 34, 1)) 3 3;
    text-align: center;
    margin-right:40px;
  }
  .time-box:nth-last-of-type(1){
    margin-right:0;
  }
 .group-buying-time .dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: #914408;
  }
  .group-buying-time .timer-count p {
    margin-left: 14px;
    margin-right: 14px;
  }
  .group-buying-time .timer-count p + p {
    margin-top: 10px;
  }
  .group-buying-time .deal-timer-desc {
    font-size: 16px;
    color: #ff4042;
    line-height: 22px;
    text-align: center;
  }
  .group-buying-time .countdown img {
    margin: 0 auto;
  }
  #countdown_time{
    display:none
  }
  @media screen and (max-width: 1440px){
    .group-buying-time .countdown{
      width:65%;
      margin:0 auto
    }
    .time-box {
      width: 80px;
      height: 80px;
    }
    .group-buying-time .format_span_time {
      font-size: 24px;
      line-height: 28px;
    }
    .group-buying-time .title{
      font-size:28px;
    }
    .group-buying-time{
      padding:20px 0;
    }
  }
  @media screen and (max-width: 1330px){
    .group-buying-time .format_span_time{
      font-size:30px
    }
    .group-buying-time .timer-text{
      font-size:16px
    }
    .group-buying-time .group-buying-time-desc{
      font-size:26px
    }
  }
  @media screen and (max-width: 1024px){
    .group-buying-time .countdown{
      width:80%
    }
    .group-buying-time .format_span_time{
      font-size:26px
    }
    .group-buying-time .timer-text{
      font-size:14px
    }
    .group-buying-time .group-buying-time-desc{
      font-size:24px
    }
    .group-buying-time .timer-count p{
      margin-left: 12px;
      margin-right: 12px;
    }
  }
  @media screen and (max-width: 820px){
    .group-buying-time{
      padding-top:19px;
      background: #FFE6C5
    }
    .group-buying-time .format_span_time{
      font-size:22px;
      padding-top: 3px;
      line-height: 26px;
    }
    .group-buying-time .group-buying-time-desc{
      font-size: 16px;
      margin-right: 0;
      line-height: 32px;
    }
    .group-buying-time .group-buying-time-content{
      display:block;
      text-align:center;
      top: 7%;
    }
    .group-buying-time .countdown{
      width:96%
    }
    .group-buying-time{
      padding-bottom:10px;
    }
    .time-box {
      width: 68px;
      height: 55px;
      background: linear-gradient(180deg, #FFF9E2 0%, #FFF0C1 100%);
      box-shadow: inset 0px 4px 7px 0px rgba(92,59,0,0.5);
      border-radius: 4px;
      border: 3px solid;
      border-image: linear-gradient(180deg, rgba(214, 114, 46, 1), rgba(255, 177, 34, 1)) 3 3;
      margin-right:5px;
    }
    .group-buying-time .title {
      font-size: 16px;
      line-height: 22px;
    }
    .group-buying-time .group-buying-time-desc {
      font-size: 14px;
      line-height: 28px;
    }
    .group-buying-time-desc .circle {
      width: 3px;
      height: 3px;
    }
    .group-buying-time-desc .line {
      width: 35px;
      height: 1px;
    }
    .group-buying-time-desc .left {
      margin-right: 5px;
    }
    .group-buying-time-desc .right {
      margin-left: 5px;
    }
    .time-box{ 
      border-width: 1px;
    }
  }
  @media screen and (max-width: 450px){
    .group-buying-time .title{
      width: 228px;
      margin: 0 auto;
    }
  }
</style>
<div class="group-buying-time">
  <p class="title">{{ section.settings.title }}</p>
  <div class="deal-timer-countdown">
    <div class="countdown">
      <picture>
        <source media="(max-width: 820px)" srcset="{{ section.settings.image_mobile | img_url:'337x' }}" />
        <source media="(min-width: 821px)" srcset="{{ section.settings.image | img_url:'1012x' }}">
        <img src="{{ section.settings.image | img_url:'1012x' }}"/>
      </picture>
      <div class="group-buying-time-content">
        <div class="group-buying-time-desc">
          <span class="left">
             <i class="line"></i><i class="circle"></i>
          </span>
          {{ section.settings.desc_text }}
          <span class="right">
             <i class="circle"></i><i class="line"></i>
          </span>
        </div>
        <div class="timer-count">
        <div class="time-box">
          <div class="format_span_time">
            <div>
            <span id="days" class="days format_span t">00</span>
            </div>
          </div>
          <span class="timer-text">Days</span>
        </div>
        <div class="time-box">
          <div class="format_span_time">
            <div>
              <span id='hour' class="hour format_span t">00</span>
            </div>       
          </div>
          <span class="timer-text">Hours</span>
        </div>
        <div class="time-box">
          <div class="format_span_time">
            <div>
            <span id='minute' class="minute format_span t">00</span>
            </div>
          </div>
          <span class="timer-text">Mins</span>
        </div>
        <div class="time-box">
          <div class="format_span_time">
            <div>
            <span id='second' class="second format_span t">00</span>
            </div>
           </div>
          <span class="timer-text">Sec</span>
        </div>
      </div>
      </div>
    </div>
    <div id="countdown_time">{{ section.settings.countdown_time }}</div>
  </div>
</div>
<script>
  // var p_times = '2023-3-10 14:35:00';
  var p_times = $('#countdown_time').text();
  //获取元素
  var days  = $("#days")[0];
  var hour = $("#hour")[0];
  var minute = $("#minute")[0];
  var second = $("#second")[0];
  //获取截止时间的时间戳（单位毫秒）
  var inputTime = new Date(""+ p_times.replace(/-/g, "/"));
  //我们先调用countDown函数，可以避免在打开界面后停一秒后才开始倒计时
  countDown();
  //定时器 每隔一秒变化一次
  var timer_s = setInterval(countDown, 1000);
  function countDown() {
      //获取当前时间的时间戳（单位毫秒）
      var nowTime = +new Date();
      //把剩余时间毫秒数转化为秒
      var times = (inputTime - nowTime) / 1000;
      if (times > 0) {
         var d = Math.floor(times /60 / 60 / 24 );
      //计算小时数 转化为整数
      //如果小时数小于 10，要变成 0 + 数字的形式 赋值给盒子
      days.innerHTML = d < 10 ? "0" + d : d;
      var h = Math.floor(times /60 / 60 % 24 );
      //计算小时数 转化为整数
      //如果小时数小于 10，要变成 0 + 数字的形式 赋值给盒子
      hour.innerHTML = h < 10 ? "0" + h : h;
      //计算分钟数 转化为整数
      var m = parseInt(times / 60 % 60);
      //如果分钟数小于 10，要变成 0 + 数字的形式 赋值给盒子
      minute.innerHTML = m < 10 ? "0" + m : m;
      //计算描述 转化为整数
      var s = parseInt(times % 60);
      // //如果秒钟数小于 10，要变成 0 + 数字的形式 赋值给盒子
      second.innerHTML = s < 10 ? "0" + s : s;
      } else {
        clearInterval(timer_s);
      }
  }
</script>
{% schema %}
  {
    "name": "Group-Buying-Time",
    "settings": [
      {
        "type":"image_picker",
        "id":"background_image",
        "label":"background image"
      },{
        "type":"text",
        "id":"title",
        "label":"title"
      },{
        "type":"image_picker",
        "id":"image",
        "label":"image"
      }, {
        "type":"image_picker",
        "id":"image_mobile",
        "label":"image mobile"
      }, 
      {
        "type":"text",
        "id":"desc_text",
        "label":"desc"
      },{
        "type":"text",
        "id":"countdown_time",
        "label":"text"
      }],
     "presets": [
        {
          "name": "Group-Buying-Time"
        }
      ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}